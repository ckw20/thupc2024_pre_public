\begin{frame}{G 采矿 {by \itshape E.Space}}

	一棵有根二叉树，初始有个机器人在 $s$.

	有 4 种指令：

    \begin{enumerate}
	\item 将机器人往祖先移至少一步
	\item 将机器人往子树里移至少一步
	\item 将一个人类加到根
	\item 将一个人类从根移走
	\end{enumerate}
	移动时只能点上站人且一个点只能包含不超过一个人.

	每个点有产出，根据上面的工人，在每个指令结算.

	指令之间人类可以任意移动，求最大总产出.


\end{frame}

\begin{frame}{正解}

	当前状态只和机器人位置、当前是哪个计划，以及被机器人分开的每个连通块里有几个人类有关. \pause

	全部记录到状态里暴力 DP. \pause

	注意每个时刻人类总数是已知的，所以只要记录两个子树里分别有多少人类. \pause

	状态总数为对每个点计算两个子树 size 的积加起来，是平方的. \pause

	前两种计划需要额外记录机器人是否移动过. \pause

	转移的时候需要枚举下一步往里走的那个子树里的人类怎么分配. \pause

	可以用前缀和优化做到 $O(1)$ 单次转移，总复杂度 $O(qn^2)$

\end{frame}

\begin{frame}{花絮}

	这题是我两年前看着堵死的停车位出的.

	改着改着就成这样了.

	虽然看着题目描述很像桌游说明书，但这题和桌游没有一点关系.

\end{frame}